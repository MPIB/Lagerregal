{% extends "base.html" %}
{% load i18n %}
{% block title %}IP-Addresses{% endblock %}

{% block header %}
IP-Addresses
{% endblock %}

{% block pullright %}
{{viewform.viewfilter}}
{% if perms.network.add_ipaddress %}<a href="{% url 'ipaddress-add' %}" class="btn btn-success btn-sm pull-right"><i class="icon-plus" style="margin-right:7px"></i>{% trans "Add IP-Address" %}</a>{% endif %}
{% endblock %}
{% block content %}

{% include "snippets/ipaddresspagination.html" with listurl='ipaddress-list' %}
    <table width="100%" id="adresstable" class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>IP Address</th>
      <th>Device</th>
    </tr>
  </thead>
  <tbody>
  	{% for ipaddress in ipaddress_list %}
    <tr>
      <td><a href="{% url 'ipaddress-detail' ipaddress.id %}">{{ ipaddress.address }}</a></td>
      {% if ipaddress.device %}
          <td><a href="{% url 'device-detail' ipaddress.device.id %}">{{ipaddress.device}}</a></td>
          {% else %}
          <td>Not assigned</td>
          {% endif %}
    </tr>
     {% endfor %}
  </tbody>
</table>
{% include "snippets/ipaddresspagination.html" with listurl='ipaddress-list' %}
{% endblock %}

{% block scriptend %}
$(document).ready(function() {
    $('#devicetable tr').click(function() {
        var href = $(this).find("a").attr("href");
        if(href) {
            window.location = href;
        }
    });

    $('#id_viewfilter').change(function() {
    window.location = "/ipaddresses/filter/" + $(this).val()
});

});

{% include "snippets/pagination_js.html" with pageurl="ipaddress-list" %}
{% endblock %}