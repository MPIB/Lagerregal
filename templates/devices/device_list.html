{% extends "base.html" %}

{% block title %}Devices{% endblock %}

{% block header %}
Devices
{% endblock %}

{% block pullright %}
{{viewform.viewfilter}}
<a href="{% url 'device-add' %}" class="button success small right split">Add Device<span data-dropdown="template-dropdown"></span></a>

{% endblock %}

{% block content %}
{% include "snippets/pagination.html" with listurl='device-list' %}
    <table width="100%" id="devicetable">
  <thead>
    <tr>
      <th>Name</th>
      <th>Buildnumber</th>
      <th>Devicetype</th>
      <th>Room</th>
    </tr>
  </thead>
  <tbody>
  	{% for device in device_list %}
    <tr>
      <td><a href="{% url 'device-detail' device.id %}">{{ device.name }}</a></td>
      <td>{{ device.buildnumber }}</td>
      <td>{{ device.devicetype }}</td>
      <td>{{ device.room }} ({{device.room.building}})</td>
    </tr>
     {% endfor %}
  </tbody>
</table>
{% include "snippets/pagination.html" with listurl='device-list' %}



{% endblock %}

{% block scriptend %}
$(document).ready(function() {
    $('#devicetable tr').click(function() {
        var href = $(this).find("a").attr("href");
        if(href) {
            window.location = href;
        }
    });
$('#id_viewfilter').change(function() {
    window.location = "/devices/filter/" + $(this).val()
});

});
{% endblock %}

{% block htmlend %}
<div id="template-dropdown" class="f-dropdown content" data-dropdown-content>
  <h5>Create from Template</h4>
<ul style="list-style-type:none;">
      {% for template in template_list %}
      <li><a href="{% url 'device-add' template.pk %}">{{template.templatename}}</a></li>
      {% endfor %}
    </ul>
    <hr>
    <a href="{% url 'template-add' %}">New Template</a>
  </div>
{% endblock %}