{% extends "snippets/widgets/basewidget.html" %}
 {% load i18n %}

 {% block title %}
{% trans 'Edit history' %}
 {% endblock %}

{% block widgetname %}edithistory{% endblock %}

 {% block content %}
<table class="table table-bordered" width="100%" {% if widget.minimized and usestable %}style="display: none;"{% endif %}>
    <thead>
        <tr>
            <th scope="col">{% trans 'Device' %}</th>
            <th scope="col">{% trans 'Date/time' %}</th>
            <th scope="col">{% trans 'User' %}</th>
            <th scope="col" class="commentcol">{% trans 'Comment' %}</th>
        </tr>
    </thead>
    <tbody>
        {% for action in revisions %}
            <tr>
                <td>
                    {% if action.content_type.model == "ipaddress" %}
                    <a href="{% url 'ipaddress-detail' action.object_id %}">{{action.field_dict.address}}
                    {% elif action.content_type.model == "building" %}
                    <a href="{% url 'building-detail' action.object_id %}">{{action.field_dict.name}}
                    {% elif action.content_type.model == "room" %}
                    <a href="{% url 'room-detail' action.object_id %}">{{action.field_dict.name}}
                    {% elif action.content_type.model == "manufacturer" %}
                    <a href="{% url 'manufacturer-detail' action.object_id %}">{{action.field_dict.name}}
                    {% elif action.content_type.model == "type" %}
                    <a href="{% url 'type-detail' action.object_id %}">{{action.field_dict.name}}
                    {% elif action.content_type.model == "mailtemplate" %}
                    <a href="{% url 'mail-detail' action.object_id %}">{{action.field_dict.name}}
                    {% elif action.content_type.model == "devicegroup" %}
                    <a href="{% url 'devicegroup-detail' action.object_id %}">{{action.field_dict.name}}
                    {% elif action.content_type.model == "device" %}
                    <a href="{% url 'device-detail' action.object_id %}">{{action.field_dict.name}}
                    {% endif %}
                    </a>
                </td>
                <td>
                {% if action.content_type.model == "device" %}
                <a href="{% url 'device-history' action.object_id action.pk %}" title="{{action.revision.date_created|date:'Y-m-d\TH:i:s'}}" class="edit-date">{{action.revision.date_created}}</a>
                {% else %}
                <span  title="{{action.revision.date_created|date:'Y-m-d\TH:i:s'}}" class="edit-date">{{action.revision.date_created}}</span>
                {% endif %}
                </td>
                <td><a href="{% url 'userprofile' action.revision.user.pk %}">{{action.revision.user}}</a></td>
                <td class="commentcol">{{action.revision.comment|linebreaksbr|default:""}}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
<div class="panel-footer">
<a href="{% url 'globalhistory' %}" class="pull-right">{% trans "Moreâ€¦" %}</a>
<div class="clearfix"></div>
</div>
{% endblock %}